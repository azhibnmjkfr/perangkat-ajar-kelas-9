<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Perangkat Ajar Kelas 9 | MTsT Daarut Tahfizh Al-Ikhlas</title>
  <meta name="description" content="Koleksi digital perangkat ajar Bahasa Inggris Kelas 9 — Kurikulum Merdeka 2025/2026">
  <meta name="theme-color" content="#234626">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
  <style>
    :root {
      /* Teacher Command Center Palette */
      --primary: #234626; /* Deep Forest Green */
      --primary-dark: #1a351d;
      --accent: #D4AF37; /* Gold */
      --accent-light: #f1e5bc;
      --accent-hover: #b5952f;
      
      --bg: #F8FAFC; 
      --text: #1E293B; 
      --text-light: #64748B;
      
      /* Glassmorphism Variables */
      --card-bg: rgba(255, 255, 255, 0.85);
      --card-border: 1px solid rgba(255, 255, 255, 0.6);
      --glass-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --glass-shadow-hover: 0 20px 25px -5px rgba(35, 70, 38, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

      --radius: 16px; 
      --radius-sm: 8px; 
      --gap: 24px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      
      --font-body: 'Inter', sans-serif; 
      --font-title: 'Playfair Display', serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body { 
      font-family: var(--font-body); 
      background: var(--bg); 
      color: var(--text); 
      line-height: 1.6; 
      min-height: 100vh; 
      padding-bottom: 80px;
      position: relative;
    }

    /* Geometric Background Pattern */
    .bg-pattern {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
        background-color: var(--bg);
        background-image: 
            radial-gradient(at 0% 0%, rgba(35, 70, 38, 0.05) 0px, transparent 50%),
            radial-gradient(at 100% 0%, rgba(212, 175, 55, 0.08) 0px, transparent 50%);
    }

    .app { max-width: 1200px; margin: 0 auto; padding: 32px 20px; }

    /* Hero Section */
    .hero {
      text-align: center; 
      padding: 4rem 2rem 3rem; 
      background: linear-gradient(135deg, var(--primary) 0%, #142816 100%);
      color: white; 
      border-radius: var(--radius); 
      margin-bottom: 48px; 
      position: relative; 
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(35, 70, 38, 0.2);
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    /* Abstract shapes in hero */
    .hero::before {
      content: ''; position: absolute; top: -50%; left: -10%; width: 80%; height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.03) 0%, transparent 60%);
      transform: rotate(30deg); pointer-events: none;
    }
    .hero::after {
      content: ''; position: absolute; bottom: -20px; right: -20px; width: 300px; height: 300px;
      border: 2px solid rgba(212, 175, 55, 0.15); border-radius: 50%; pointer-events: none;
    }

    /* Back Button in Hero */
    .back-nav {
      position: absolute; top: 20px; left: 20px; z-index: 10;
    }
    .back-btn {
      display: inline-flex; align-items: center; gap: 8px;
      color: rgba(255,255,255,0.9); text-decoration: none;
      font-weight: 600; font-size: 0.9rem;
      padding: 8px 16px; border-radius: 50px;
      background: rgba(255,255,255,0.1); backdrop-filter: blur(4px);
      border: 1px solid rgba(255,255,255,0.2);
      transition: var(--transition);
    }
    .back-btn:hover { background: rgba(255,255,255,0.2); color: var(--accent); border-color: var(--accent); }

    .hero h1 { font-family: var(--font-title); font-size: clamp(2.2rem, 4vw, 3rem); font-weight: 700; margin-bottom: 12px; color: var(--accent); }
    .tagline { font-size: clamp(1.1rem, 2vw, 1.3rem); opacity: 0.95; margin-bottom: 24px; font-weight: 300; }
    
    .info { display: flex; justify-content: center; gap: 32px; flex-wrap: wrap; font-size: 0.95rem; opacity: 0.9; margin-bottom: 12px; }
    .info div { display: flex; align-items: center; gap: 8px; }
    .info i { color: var(--accent); }
    
    .stats { display: flex; justify-content: center; gap: 48px; margin-top: 32px; flex-wrap: wrap; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 24px; }
    .stat { text-align: center; position: relative; }
    .stat strong { display: block; font-size: clamp(1.8rem, 3vw, 2.2rem); font-weight: 700; color: var(--accent); margin-bottom: 4px; line-height: 1; }
    .stat span { font-size: 0.85rem; opacity: 0.8; text-transform: uppercase; letter-spacing: 1px; }

    /* Search */
    .search-container { position: relative; max-width: 680px; margin: 0 auto 36px; }
    .search { 
      width: 100%; padding: 18px 60px 18px 24px; font-size: 1.05rem; 
      border: var(--card-border); border-radius: 50px; 
      background: rgba(255,255,255,0.9); backdrop-filter: blur(10px);
      box-shadow: var(--glass-shadow); transition: var(--transition); 
      color: var(--text);
    }
    .search:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.15); }
    .search-icon { position: absolute; right: 24px; top: 50%; transform: translateY(-50%); color: var(--primary); font-size: 1.3rem; pointer-events: none; }

    /* Categories */
    .categories { display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; margin-bottom: 40px; }
    .cat-chip { 
      padding: 10px 20px; background: rgba(255,255,255,0.7); 
      border: 1px solid rgba(35, 70, 38, 0.1); border-radius: 50px; 
      font-size: 0.9rem; font-weight: 600; color: var(--text-light); 
      display: flex; align-items: center; gap: 8px; 
      transition: var(--transition); cursor: pointer; 
      backdrop-filter: blur(4px);
    }
    .cat-chip i { color: var(--primary); }
    .cat-chip:hover { border-color: var(--accent); color: var(--primary); transform: translateY(-2px); background: white; }
    .cat-chip.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 12px rgba(35, 70, 38, 0.2); }
    .cat-chip.active i { color: var(--accent); }

    /* Document List */
    .list { display: grid; gap: var(--gap); grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); }
    
    .item { 
      background: var(--card-bg); 
      border-radius: var(--radius); padding: 24px; 
      display: flex; flex-direction: column; gap: 16px; 
      border: var(--card-border); 
      box-shadow: var(--glass-shadow); 
      backdrop-filter: blur(12px);
      transition: var(--transition); cursor: pointer; 
      position: relative; overflow: hidden; 
    }
    
    .item::before { 
      content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; 
      background: linear-gradient(90deg, var(--primary), var(--accent)); 
      transform: scaleX(0); transition: transform 0.3s ease; 
    }
    
    .item:hover { transform: translateY(-6px); box-shadow: var(--glass-shadow-hover); border-color: var(--accent); }
    .item:hover::before { transform: scaleX(1); }
    
    .item-title { 
      font-family: var(--font-title);
      font-weight: 700; font-size: 1.25rem; color: var(--primary); 
      margin-bottom: 8px; line-height: 1.3; 
      display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; 
    }
    
    .item-meta { display: flex; gap: 12px; font-size: 0.85rem; color: var(--text-light); flex-wrap: wrap; }
    .item-meta span { display: flex; align-items: center; gap: 6px; background: rgba(35, 70, 38, 0.05); padding: 4px 10px; border-radius: 6px; font-weight: 500; }
    .item-meta i { color: var(--accent-hover); font-size: 0.8rem; }
    
    .item-actions { display: flex; gap: 12px; align-items: center; margin-top: auto; }

    /* Buttons */
    .btn { 
      padding: 10px 18px; border-radius: 50px; font-size: 0.85rem; font-weight: 600; 
      cursor: pointer; transition: var(--transition); display: flex; align-items: center; 
      gap: 8px; justify-content: center; border: 1px solid transparent; text-decoration: none; flex: 1;
    }
    
    .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(35,70,38,0.2); }
    .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); color: var(--accent); }
    
    .btn-ghost { background: transparent; color: var(--primary); border-color: rgba(35,70,38,0.2); }
    .btn-ghost:hover { border-color: var(--primary); background: rgba(35,70,38,0.05); }
    
    .highlight { background: rgba(212, 175, 55, 0.2); color: var(--primary-dark); padding: 0 4px; border-radius: 2px; }

    /* Explore Hint */
    .explore-hint { 
      text-align: center; margin: 48px 0 24px; padding: 24px; color: var(--text-light); 
      font-size: 1rem; font-weight: 500; background: var(--card-bg); 
      border-radius: var(--radius); border: 1px solid rgba(212, 175, 55, 0.3);
      backdrop-filter: blur(10px);
    }
    .explore-hint i { color: var(--accent); margin-right: 10px; animation: bounce 2s infinite; }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }

    /* Empty State */
    .empty { text-align: center; padding: 80px 20px; color: var(--text-light); display: none; }
    .empty i { font-size: 3rem; color: #cbd5e1; margin-bottom: 16px; }

    /* Toast */
    .toast {
      position: fixed; top: 24px; right: 24px; padding: 16px 20px; 
      background: var(--primary); color: white; border-left: 4px solid var(--accent);
      border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      transform: translateX(200%); opacity: 0; transition: all 0.4s ease;
      z-index: 10000; display: flex; align-items: center; gap: 12px; font-weight: 500;
    }
    .toast.show { transform: translateX(0); opacity: 1; }
    .toast i { color: var(--accent); font-size: 1.2rem; }

    /* Modal */
    .modal { position: fixed; inset: 0; background: rgba(30, 41, 59, 0.8); backdrop-filter: blur(8px); display: none; align-items: center; justify-content: center; padding: 20px; z-index: 1000; opacity: 0; transition: opacity 0.3s ease; }
    .modal.open { display: flex; opacity: 1; }
    .viewer { width: 100%; max-width: 1200px; height: 90vh; background: white; border-radius: var(--radius); overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); transform: scale(0.95); transition: transform 0.3s ease; }
    .modal.open .viewer { transform: scale(1); }
    .bar { padding: 16px 24px; background: #f1f5f9; border-bottom: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: center; }
    .modal-title { font-weight: 700; color: var(--primary); font-size: 1.1rem; }
    iframe { flex: 1; border: 0; background: #f8fafc; }

    /* Footer */
    footer { 
      margin-top: 80px; padding: 40px 20px; text-align: center; 
      color: var(--text-light); font-size: 0.9rem; 
      border-top: 1px solid rgba(0,0,0,0.05);
    }
    footer strong { color: var(--primary); }

    /* Responsive */
    @media (max-width: 768px) {
      .hero { padding: 40px 20px 60px; }
      .list { grid-template-columns: 1fr; }
      .back-nav { top: 16px; left: 16px; }
      .bar { flex-direction: column; gap: 12px; text-align: center; }
    }
  </style>
</head>
<body>

  <!-- Background Pattern -->
  <div class="bg-pattern"></div>

  <div class="app">
    
    <header class="hero">
      <div class="back-nav">
        <a href="https://azhibnmjkfr.github.io/MorpheaDTI/" class="back-btn"><i class="fas fa-arrow-left"></i> Back to Morphea</a>
      </div>
      
      <h1>Perangkat Ajar Kelas 9</h1>
      <div class="tagline">Bahasa Inggris • Kurikulum Merdeka 2025/2026</div>
      
      <div class="info">
        <div><i class="fas fa-user-tie"></i> Ahmad Zaman Huri</div>
        <div><i class="fas fa-school"></i> MTsT Daarut Tahfizh Al-Ikhlas</div>
      </div>
      
      <div class="stats">
        <div class="stat"><strong id="total-files">24</strong><span>Dokumen</span></div>
        <div class="stat"><strong id="total-views">0</strong><span>Dilihat</span></div>
        <div class="stat"><strong>5</strong><span>Kategori</span></div>
      </div>
    </header>

    <div class="search-container">
      <input type="text" class="search" id="search" placeholder="Cari dari 24 dokumen yang tersedia..." autocomplete="off">
      <i class="fas fa-search search-icon"></i>
    </div>

    <div class="categories" id="categories">
      <div class="cat-chip active" data-category="all"><i class="fas fa-layer-group"></i> Semua</div>
      <div class="cat-chip" data-category="Asesmen"><i class="fas fa-clipboard-check"></i> Asesmen</div>
      <div class="cat-chip" data-category="Dokumen Inti"><i class="fas fa-file-alt"></i> Dokumen Inti</div>
      <div class="cat-chip" data-category="Materi & Aktivitas"><i class="fas fa-book-open"></i> Materi & Aktivitas</div>
      <div class="cat-chip" data-category="RPP"><i class="fas fa-puzzle-piece"></i> RPP</div>
      <div class="cat-chip" data-category="Template"><i class="fas fa-copy"></i> Template</div>
    </div>

    <main>
      <div id="list" class="list"></div>
      
      <div class="explore-hint" id="explore-hint">
        <i class="fas fa-search"></i>Gunakan kolom pencarian untuk menemukan lebih dari 24 dokumen yang tersedia...
      </div>
      
      <div id="empty" class="empty">
        <i class="fas fa-file-circle-question"></i>
        <p>Tidak ada dokumen yang sesuai dengan pencarian Anda.</p>
      </div>
    </main>

    <footer>
      <div class="signature">Dibuat & Dikelola oleh</div>
      <div class="role" style="font-weight:700; color:var(--primary); margin:4px 0;">Ahmad Zaman Huri — Guru Bahasa Inggris</div>
      <div style="font-size:0.85rem;">MTsT Daarut Tahfizh Al-Ikhlas</div>
      <div class="system" style="margin-top:20px; color:var(--accent); font-weight:600; font-size:0.8rem; letter-spacing:1px; text-transform:uppercase;">Teacher Command Center System</div>
    </footer>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast" aria-live="polite">
    <i class="fas fa-check-circle"></i><span id="toast-message">Pesan WA siap dikirim!</span>
  </div>

  <!-- Document Viewer Modal -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="viewer">
      <div class="bar">
        <div>
          <div class="modal-title" id="modal-title">Preview</div>
          <div class="modal-meta" id="modal-meta" style="font-size:0.85rem; color:var(--text-light);"></div>
        </div>
        <div style="display:flex; gap:8px;">
          <button class="btn btn-ghost" id="open-new" style="font-size:0.8rem;"><i class="fas fa-external-link-alt"></i> Buka Tab Baru</button>
          <button class="btn btn-primary" id="close" style="font-size:0.8rem; background:var(--text); border:none;"><i class="fas fa-times"></i> Tutup</button>
        </div>
      </div>
      <iframe id="viewer-frame" title="Document Preview" src="about:blank" loading="lazy"></iframe>
    </div>
  </div>

  <!-- JAVASCRIPT LOGIC (Preserved Exactly) -->
  <script>
    const files = [
      {id:1, title:'PAS - Soal & Kunci (PAS Genap)', folder:'Asesmen', link:'https://docs.google.com/document/d/e/2PACX-1vRzu9UH3bpyDmzf7qqT_22cq-ee5FZNu0g7bPrsVTxSPaCFLho_YwDIQ4ucvSS32Vr5xKXZ78xGejfA/pub', type:'Google Doc'},
      {id:2, title:'PTS - Soal PTS Ganjil', folder:'Asesmen', link:'https://docs.google.com/document/d/e/2PACX-1vS0jfaONPxm9eLUe3naPBZZSN3fPZ6fcIBa45GIrHNBxq4Iq9f8_d2618jXqxuvgMBQcyuGIJ7nh89e/pub', type:'Google Doc'},
      {id:3, title:'KI & KD', folder:'Dokumen Inti', link:'https://docs.google.com/document/d/e/2PACX-1vQVCp9Rzc3VmvBIsst1UPOZKjSZmxv6lX1L6hhLoPd12gQqH4Jh4ig8oh_fXcsTLzURQSdVqZZKFFS9/pub', type:'Google Doc'},
      {id:4, title:'Pemetaan Kompetensi per Chapter', folder:'Dokumen Inti', link:'https://docs.google.com/document/d/e/2PACX-1vTTeeNHZ5gzodBKY8Rq8S9j1duogPMZT95W34MJoCJ-q4ri20UpaPnhKYd6srw9LRaBfENMIOqU8r7W/pub', type:'Google Doc'},
      {id:5, title:'Prota', folder:'Dokumen Inti', link:'https://docs.google.com/document/d/e/2PACX-1vTo5tsaarv8izWEvggsN-S16_dg9-mQJQN1wodHQpL8nX-dg7kcUR4SZqrIlA9HppSR8yMXT03VpLnv/pub', type:'Google Doc'},
      {id:6, title:'Promes Ganjil', folder:'Dokumen Inti', link:'https://docs.google.com/document/d/e/2PACX-1vSdNXEZsUMEn8FAPLyOy1J8tMebh0hNu1LtajPC2LDytRR8DblKta5yBjBys5Ywe6BAdXYY2ROMYCrg/pub', type:'Google Doc'},
      {id:7, title:'Promes Genap', folder:'Dokumen Inti', link:'https://docs.google.com/document/d/e/2PACX-1vTW1WHGsFD3UuCCIYFpjbGIKn5iKPAlkbHczk-SG7Ft9mj72d_4FsyUHILi1x_gvYBGf1zxT08Sa2eB/pub', type:'Google Doc'},
      {id:8, title:'TP - Tujuan Pembelajaran per Chapter', folder:'Dokumen Inti', link:'https://docs.google.com/document/d/e/2PACX-1vROy2-NNUwhM-vUkGnvOJU5JZfx8mPp_cgMV7wxbs1o21SlDfZPhKR35FzRf4xGaQZSiqNMHy-SkKAH/pub', type:'Google Doc'},
      {id:9, title:'Personal Plan', folder:'Dokumen Inti', link:'https://docs.google.com/document/d/e/2PACX-1vSXoEerdNVvFPX42JdsyqnoTKLs4PmUP-PrWKoV0EEtM6W1LAk58nYjWo1_woM4sEBLb8TSKLfFStNX/pub', type:'Google Doc'},
      {id:10, title:'Game & Ice Breaking per Chapter', folder:'Materi & Aktivitas', link:'https://docs.google.com/document/d/e/2PACX-1vT1r79fSP-VuuXKQd79i9Xz1-ZR6CTjPu2fMQtME5kn_f8lvlPVg1UVWVrok9oYFhJCzKCnH-hwmXMF/pub', type:'Google Doc'},
      {id:11, title:'Grammar Summary per Chapter', folder:'Materi & Aktivitas', link:'https://docs.google.com/document/d/e/2PACX-1vR3_ZIjFX4cEpovIzNAIPvK9JQQjFEgJ3zsVIy_o4Ee87ryXcEHMfav1JYOki69H-5AMtPJG3-i_zVL/pub', type:'Google Doc'},
      {id:12, title:'PPT per Chapter', folder:'Materi & Aktivitas', link:'https://docs.google.com/document/d/e/2PACX-1vRKbVWCco1c9Lky5EGYfo2Hx4eih9LLacpSmsAC4SwEbTbbujr44uZQT_5ThjsyMdcEsQM40TZo7cDR/pub', type:'Google Doc'},
      {id:13, title:'Vocabulary List per Chapter', folder:'Materi & Aktivitas', link:'https://docs.google.com/document/d/e/2PACX-1vQF_XBSqhLfz_86-hnnbC0v2WHYld9qjvMYyUUAOAQN1qqeY6BU88u5-fTlGi3kwG1QMEcD8TvFwahv/pub', type:'Google Doc'},
      {id:14, title:'Worksheet & Task per Chapter', folder:'Materi & Aktivitas', link:'https://docs.google.com/document/d/e/2PACX-1vQHNhoZUDt1uoZsyvlFUXLq6iaohc2RATbzyRBj_IG5t8moKnp5BCuv_vPhb296vSzYGFcI2Qriv9YI/pub', type:'Google Doc'},
      {id:15, title:'RPP - Chapter 1', folder:'RPP', link:'https://docs.google.com/document/d/e/2PACX-1vTpDtpUYjvWbOIgxJe5irfq_a4IAYaJ--4iCXg6vS2KqoIqxDh-HBSpwoRUPu-2Gi7nvnIUVsY_AYTu/pub', type:'Google Doc'},
      {id:16, title:'RPP - Chapter 2', folder:'RPP', link:'https://docs.google.com/document/d/e/2PACX-1vS9m-Xki7l0AjmzPXmfP2M6pke63ADr-Fwd8_wZsAJyCop4Lbg8hjrnYee0hPyOMBENNlA5a3qqZl6Y/pub', type:'Google Doc'},
      {id:17, title:'RPP - Chapter 3', folder:'RPP', link:'https://docs.google.com/document/d/e/2PACX-1vQmAB2j7OtwwRf5_rrukgEPHx8h1ZrknGK5XAWiAP7ACKoBdHr20YAf_55WdtD0-wEM22P9gWa1E1cL/pub', type:'Google Doc'},
      {id:18, title:'RPP - Chapter 4', folder:'RPP', link:'https://docs.google.com/document/d/e/2PACX-1vSQaM62l9t7M6NLgUZX5aIMYowzfsVVXdBE6S6doOnhawUhi3bkwvzYn2C2j9PGil9E9VXUBuT_zOw4/pub', type:'Google Doc'},
      {id:19, title:'RPP - Chapter 5', folder:'RPP', link:'https://docs.google.com/document/d/e/2PACX-1vRf4our6rHjkcqV_m__3KNSGA4xkQ67jvUDKTuzlzkEFojyNUCp_5AAcBo8IjZgu7iFL7D8HXqVVTlZ/pub', type:'Google Doc'},
      {id:20, title:'RPP - Chapter 6', folder:'RPP', link:'https://docs.google.com/document/d/e/2PACX-1vQvoBYBiFJ5wQFyQ1fix11uPkAzcg_xAZc8Nhu_xG5lrP3Si0H6QvMcOHRngCjl6ye-uNT9C4Gi1CR9/pub', type:'Google Doc'},
      {id:21, title:'RPP - Chapter 7 (Additional)', folder:'RPP', link:'https://docs.google.com/document/d/e/2PACX-1vTtGXS2603T_CGFwNyM5S1tfEXBO_Hr580sus3-GnhOwESnl9KtUF7fK0VgNj4mRt0lQFOVb8jat2O7/pub', type:'Google Doc'},
      {id:22, title:'Template RPP', folder:'Template', link:'https://docs.google.com/document/d/e/2PACX-1vRzH2D9mChYFPuj5WAJaXFUh3nc5HqoT2ZWDMky0dEJK-fJnmMhbLRSs7VQDtKRsdaARfp7BKN32GS5/pub', type:'Google Doc'},
      {id:23, title:'Template Rubrik Penilaian', folder:'Template', link:'https://docs.google.com/document/d/e/2PACX-1vRjokLn0qmgav4zp_gqLNX19hayrQTaplvUMILUOJzUGrOZU6EOGxSOjJ3MC5npDbGD7Lmvxs1D3CY6/pub', type:'Google Doc'},
      {id:24, title:'Template Worksheet', folder:'Template', link:'https://docs.google.com/document/d/e/2PACX-1vRywUVh6pEsW3AUEeuYvNzuDtWfJRkY73h8So_KgRM72wa9aUnM2bR8RNtVToOWIFAAh-2QhA1yG526/pub', type:'Google Doc'}
    ];

    // Initialize views
    files.forEach(f => {
      const key = `view:${f.link}`;
      const saved = localStorage.getItem(key);
      f.views = saved ? parseInt(saved, 10) : Math.floor(Math.random() * 400) + 80;
      localStorage.setItem(key, f.views);
    });

    const elements = {
      list: document.getElementById('list'), empty: document.getElementById('empty'), search: document.getElementById('search'),
      modal: document.getElementById('modal'), frame: document.getElementById('viewer-frame'), modalTitle: document.getElementById('modal-title'),
      modalMeta: document.getElementById('modal-meta'), totalFiles: document.getElementById('total-files'), 
      totalViews: document.getElementById('total-views'), exploreHint: document.getElementById('explore-hint'),
      categories: document.getElementById('categories'), toast: document.getElementById('toast'), 
      toastMessage: document.getElementById('toast-message'), toastTimeout: null
    };

    let currentLink = '';
    let currentCategory = 'all';
    let currentSearch = '';
    let isSearching = false;

    elements.totalFiles.textContent = files.length;
    elements.totalViews.textContent = files.reduce((a,b) => a + b.views, 0).toLocaleString();
    renderInitialFiles();

    // Event Listeners
    let searchTimeout;
    elements.search.addEventListener('input', (e) => {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        currentSearch = e.target.value.trim();
        isSearching = currentSearch.length > 0;
        renderFiles();
      }, 300);
    });

    elements.categories.addEventListener('click', (e) => {
      const chip = e.target.closest('.cat-chip');
      if (!chip) return;
      document.querySelectorAll('.cat-chip').forEach(c => c.classList.remove('active'));
      chip.classList.add('active');
      currentCategory = chip.dataset.category;
      isSearching = true;
      renderFiles();
    });

    document.getElementById('close').addEventListener('click', closeModal);
    document.getElementById('open-new').addEventListener('click', () => window.open(currentLink, '_blank'));
    elements.modal.addEventListener('click', (e) => { if (e.target === elements.modal) closeModal(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && elements.modal.classList.contains('open')) closeModal(); });

    // Functions
    function highlightText(text, query) {
      if (!query) return text;
      const regex = new RegExp(`(${query})`, 'gi');
      return text.replace(regex, '<span class="highlight">$1</span>');
    }

    function renderInitialFiles() {
      const initialFiles = files.slice(0, 6);
      renderFileList(initialFiles);
      elements.exploreHint.style.display = 'block';
    }

    function renderFiles() {
      if (!isSearching && currentCategory === 'all') {
        renderInitialFiles();
        return;
      }

      const filtered = files.filter(f => {
        const matchesCategory = currentCategory === 'all' || f.folder === currentCategory;
        const matchesSearch = !currentSearch || 
          f.title.toLowerCase().includes(currentSearch.toLowerCase()) || 
          f.folder.toLowerCase().includes(currentSearch.toLowerCase());
        return matchesCategory && matchesSearch;
      });

      renderFileList(filtered);
    }

    function renderFileList(fileList) {
      elements.list.innerHTML = '';
      if (!fileList.length) {
        elements.empty.style.display = 'block';
        elements.exploreHint.style.display = 'none';
        return;
      }

      elements.empty.style.display = 'none';
      
      fileList.forEach(file => {
        const el = document.createElement('div');
        el.className = 'item';
        const highlightedTitle = highlightText(file.title, currentSearch);

        el.innerHTML = `
          <div class="item-content">
            <div class="item-title">${highlightedTitle}</div>
            <div class="item-meta">
              <span><i class="fas fa-folder"></i> ${file.folder}</span>
              <span><i class="fas fa-eye"></i> ${file.views} dilihat</span>
              <span><i class="fas fa-file-lines"></i> ${file.type}</span>
            </div>
          </div>
          <div class="item-actions">
            <button class="btn btn-primary" data-action="preview"><i class="fas fa-eye"></i> Preview</button>
            <button class="btn btn-ghost" data-action="wa"><i class="fab fa-whatsapp"></i> Minta via WA</button>
          </div>
        `;

        el.querySelector('[data-action="preview"]').addEventListener('click', (e) => {
          e.stopPropagation();
          openPreview(file);
        });

        el.querySelector('[data-action="wa"]').addEventListener('click', (e) => {
          e.stopPropagation();
          const message = encodeURIComponent(`Halo Pak Ahmad, saya ingin mendapatkan:\n"${file.title}"\n(Kelas 9 - ${file.folder})`);
          window.open(`https://wa.me/6282246077307?text=${message}`, '_blank');
          showToast('Pesan WA siap dikirim!');
        });

        el.addEventListener('click', () => openPreview(file));
        elements.list.appendChild(el);
      });

      elements.exploreHint.style.display = (!isSearching && currentCategory === 'all' && fileList.length <= 6) ? 'block' : 'none';
    }

    function openPreview(file) {
      elements.modal.classList.add('open');
      elements.modal.setAttribute('aria-hidden', 'false');
      elements.modalTitle.textContent = file.title;
      elements.modalMeta.textContent = `${file.folder} • ${file.type}`;
      currentLink = file.link;
      elements.frame.src = file.link;
      
      file.views++;
      localStorage.setItem(`view:${file.link}`, file.views);
      elements.totalViews.textContent = files.reduce((a,b) => a + b.views, 0).toLocaleString();
    }

    function closeModal() {
      elements.modal.classList.remove('open');
      elements.modal.setAttribute('aria-hidden', 'true');
      elements.frame.src = 'about:blank';
    }

    function showToast(message) {
      elements.toastMessage.textContent = message;
      elements.toast.classList.add('show');
      clearTimeout(elements.toastTimeout);
      elements.toastTimeout = setTimeout(() => {
        elements.toast.classList.remove('show');
      }, 2500);
    }
  </script>
</body>
</html>
